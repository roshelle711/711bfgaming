# Traefik Dynamic Configuration for 711BF Gaming
# Routes for game client and WebSocket server
# Note: Using HTTP since Tailscale provides network-level encryption

http:
  # Routers
  routers:
    # Game Client (Phaser)
    game-client:
      rule: "Host(`game.711bf.org`)"
      entryPoints:
        - web
      service: http-client-service

    # WebSocket Server (Colyseus)
    websocket-server:
      rule: "Host(`ws.game.711bf.org`)"
      entryPoints:
        - web
      service: colyseus-service

  # Services
  services:
    # HTTP Client (Phaser game files)
    http-client-service:
      loadBalancer:
        servers:
          - url: "http://localhost:3000"

    # Colyseus WebSocket Server
    colyseus-service:
      loadBalancer:
        servers:
          - url: "http://localhost:2567"
