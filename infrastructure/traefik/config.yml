# Traefik Dynamic Configuration for 711BF Gaming
# Routes for game client and WebSocket server with TLS

http:
  # Routers
  routers:
    # Game Client (Phaser) - HTTPS
    game-client:
      rule: "Host(`game.711bf.org`)"
      entryPoints:
        - websecure
      service: http-client-service
      tls: {}

    # WebSocket Server (Colyseus) - WSS
    websocket-server:
      rule: "Host(`ws.game.711bf.org`)"
      entryPoints:
        - websecure
      service: colyseus-service
      tls: {}

  # Services
  services:
    # HTTP Client (Phaser game files)
    http-client-service:
      loadBalancer:
        servers:
          - url: "http://localhost:3000"

    # Colyseus WebSocket Server
    colyseus-service:
      loadBalancer:
        servers:
          - url: "http://localhost:2567"

# TLS Certificates
tls:
  certificates:
    - certFile: "C:/Users/cristina/711bfgaming/infrastructure/traefik/game.711bf.org.fullchain.pem"
      keyFile: "C:/Users/cristina/711bfgaming/infrastructure/traefik/game.711bf.org.privkey.pem"
